function EventDispatcher(){this._listeners={}}function init(){var a=new Options;a.aesKey="796x9qh27xcrb69q27xcrb61274xcr6b",a.facebookAppID="",a.rootPassword="w957cbnooo5796",stage.init(function(){page.init()})}function Page(){Page.init=function(){window.onresize();var a=new Shape;a.beginFill(1,.2,0,1),a.x=126,a.drawRect(0,0,300,100)}}function Stage(){var a=!1;Stage.init=function(a){Stage=gl.init(),program.init(function(){function c(){}var b=[];Stage.addResizeCallback=function(a){b.push(a)},window.onresize=function(){Stage.width=window.innerWidth,Stage.height=window.innerHeight,gl.viewport(0,0,Stage.width,Stage.height),gl.clear(gl.COLOR_BUFFER_BIT),c(),Stage.projectionMatrix=gl.make2DProjection(Stage.width,Stage.height);for(var a=0;a<b.length;a++)b[a]();gl.flush(),gl.finish()},a()})}}function Shape(){function l(){var a=360-f;b=a*Math.PI/180,j=gl.makeRotation(b)}function m(){k=gl.makeScale(g,h)}function n(){i=gl.makeTranslation(d,e)}var a=0,b=0,c=Class.prototype,d=0,e=0,f=0,g=1,h=1,i,j,k;this.id=a++ +"",l(),m(),n(),this.buffer=gl.createBuffer(),this.compute=function(){var a=mat3.multiply(k,j);a=mat3.multiply(a,i),a=mat3.multiply(a,stage.projectionMatrix),gl.uniformMatrix3fv(program.NORMAL.matrixLocation,!1,a)},Object.defineProperty(c,"x",{get:function(){return d},set:function(a){d=a,n()}})}EventDispatcher.prototype={addListener:function(a,b){typeof this._listeners[a]=="undefined"&&(this._listeners[a]=[]),this._listeners[a].push(b)},dispatch:function(a){typeof a=="string"&&(a={type:a}),a.target||(a.target=this);if(!a.type)throw new Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array){var b=this._listeners[a.type];for(var c=0,d=b.length;c<d;c++)b[c].call(this,a)}},removeListener:function(a,b){if(this._listeners[a]instanceof Array){var c=_listeners[a];for(var d=0,e=c.length;d<e;d++)if(c[d]===b){c.splice(d,1);break}}}},define(function(){var a=typeof exports!="undefined"?global:window;a.glMatrixArrayType=a.MatrixArray=null,a.vec3={},a.mat3={},a.mat4={},a.quat4={},a.setMatrixArrayType=function(a){return glMatrixArrayType=MatrixArray=a},a.determineMatrixArrayType=function(){return setMatrixArrayType(typeof Float32Array!="undefined"?Float32Array:Array)},determineMatrixArrayType(),vec3.create=function(a){var b=new MatrixArray(3);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0,b},vec3.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},vec3.add=function(a,b,c){return!c||a===c?(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a):(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c)},vec3.subtract=function(a,b,c){return!c||a===c?(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a):(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c)},vec3.multiply=function(a,b,c){return!c||a===c?(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a):(c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c)},vec3.negate=function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},vec3.scale=function(a,b,c){return!c||a===c?(a[0]*=b,a[1]*=b,a[2]*=b,a):(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c)},vec3.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);return f?f===1?(b[0]=c,b[1]=d,b[2]=e,b):(f=1/f,b[0]=c*f,b[1]=d*f,b[2]=e*f,b):(b[0]=0,b[1]=0,b[2]=0,b)},vec3.cross=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2];return c[0]=e*i-f*h,c[1]=f*g-d*i,c[2]=d*h-e*g,c},vec3.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},vec3.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1],f=a[2]-b[2],g=Math.sqrt(d*d+e*e+f*f);return g?(g=1/g,c[0]=d*g,c[1]=e*g,c[2]=f*g,c):(c[0]=0,c[1]=0,c[2]=0,c)},vec3.lerp=function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},vec3.dist=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},vec3.unproject=function(a,b,c,d,e){e||(e=a);var f=mat4.create(),g=new MatrixArray(4);return g[0]=(a[0]-d[0])*2/d[2]-1,g[1]=(a[1]-d[1])*2/d[3]-1,g[2]=2*a[2]-1,g[3]=1,mat4.multiply(c,b,f),mat4.inverse(f)?(mat4.multiplyVec4(f,g),g[3]===0?null:(e[0]=g[0]/g[3],e[1]=g[1]/g[3],e[2]=g[2]/g[3],e)):null},vec3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"},mat3.create=function(a){var b=new MatrixArray(9);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]),b},mat3.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},mat3.identity=function(a){return a||(a=mat3.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},mat3.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=c,a[5]=a[7],a[6]=d,a[7]=e,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},mat3.toMat4=function(a,b){return b||(b=mat4.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},mat3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"},mat4.create=function(a){var b=new MatrixArray(16);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b},mat4.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},mat4.identity=function(a){return a||(a=mat4.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=c,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=f,a[11]=a[14],a[12]=e,a[13]=g,a[14]=h,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},mat4.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15];return n*k*h*e-j*o*h*e-n*g*l*e+f*o*l*e+j*g*p*e-f*k*p*e-n*k*d*i+j*o*d*i+n*c*l*i-b*o*l*i-j*c*p*i+b*k*p*i+n*g*d*m-f*o*d*m-n*c*h*m+b*o*h*m+f*c*p*m-b*g*p*m-j*g*d*q+f*k*d*q+j*c*h*q-b*k*h*q-f*c*l*q+b*g*l*q},mat4.inverse=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],n=a[11],o=a[12],p=a[13],q=a[14],r=a[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y,F;return E?(F=1/E,b[0]=(h*D-i*C+j*B)*F,b[1]=(-d*D+e*C-f*B)*F,b[2]=(p*x-q*w+r*v)*F,b[3]=(-l*x+m*w-n*v)*F,b[4]=(-g*D+i*A-j*z)*F,b[5]=(c*D-e*A+f*z)*F,b[6]=(-o*x+q*u-r*t)*F,b[7]=(k*x-m*u+n*t)*F,b[8]=(g*C-h*A+j*y)*F,b[9]=(-c*C+d*A-f*y)*F,b[10]=(o*w-p*u+r*s)*F,b[11]=(-k*w+l*u-n*s)*F,b[12]=(-g*B+h*z-i*y)*F,b[13]=(c*B-d*z+e*y)*F,b[14]=(-o*v+p*t-q*s)*F,b[15]=(k*v-l*t+m*s)*F,b):null},mat4.toRotationMat=function(a,b){return b||(b=mat4.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},mat4.toMat3=function(a,b){return b||(b=mat3.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},mat4.toInverseMat3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],i=a[8],j=a[9],k=a[10],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n,p;return o?(p=1/o,b||(b=mat3.create()),b[0]=l*p,b[1]=(-k*d+e*j)*p,b[2]=(h*d-e*g)*p,b[3]=m*p,b[4]=(k*c-e*i)*p,b[5]=(-h*c+e*f)*p,b[6]=n*p,b[7]=(-j*c+d*i)*p,b[8]=(g*c-d*f)*p,b):null},mat3.multiply=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=b[6],s=b[7],t=b[8];return[c*l+d*o+e*r,c*m+d*p+e*s,c*n+d*q+e*t,f*l+g*o+h*r,f*m+g*p+h*s,f*n+g*q+h*t,i*l+j*o+k*r,i*m+j*p+k*s,i*n+j*q+k*t]},mat4.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],x=b[4],y=b[5],z=b[6],A=b[7],B=b[8],C=b[9],D=b[10],E=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return c[0]=t*d+u*h+v*l+w*p,c[1]=t*e+u*i+v*m+w*q,c[2]=t*f+u*j+v*n+w*r,c[3]=t*g+u*k+v*o+w*s,c[4]=x*d+y*h+z*l+A*p,c[5]=x*e+y*i+z*m+A*q,c[6]=x*f+y*j+z*n+A*r,c[7]=x*g+y*k+z*o+A*s,c[8]=B*d+C*h+D*l+E*p,c[9]=B*e+C*i+D*m+E*q,c[10]=B*f+C*j+D*n+E*r,c[11]=B*g+C*k+D*o+E*s,c[12]=F*d+G*h+H*l+I*p,c[13]=F*e+G*i+H*m+I*q,c[14]=F*f+G*j+H*n+I*r,c[15]=F*g+G*k+H*o+I*s,c},mat4.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12],c[1]=a[1]*d+a[5]*e+a[9]*f+a[13],c[2]=a[2]*d+a[6]*e+a[10]*f+a[14],c},mat4.multiplyVec4=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],g=b[3];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*g,c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*g,c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*g,c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*g,c},mat4.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g,h,i,j,k,l,m,n,o,p,q,r;return!c||a===c?(a[12]=a[0]*d+a[4]*e+a[8]*f+a[12],a[13]=a[1]*d+a[5]*e+a[9]*f+a[13],a[14]=a[2]*d+a[6]*e+a[10]*f+a[14],a[15]=a[3]*d+a[7]*e+a[11]*f+a[15],a):(g=a[0],h=a[1],i=a[2],j=a[3],k=a[4],l=a[5],m=a[6],n=a[7],o=a[8],p=a[9],q=a[10],r=a[11],c[0]=g,c[1]=h,c[2]=i,c[3]=j,c[4]=k,c[5]=l,c[6]=m,c[7]=n,c[8]=o,c[9]=p,c[10]=q,c[11]=r,c[12]=g*d+k*e+o*f+a[12],c[13]=h*d+l*e+p*f+a[13],c[14]=i*d+m*e+q*f+a[14],c[15]=j*d+n*e+r*f+a[15],c)},mat4.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2];return!c||a===c?(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=f,a[9]*=f,a[10]*=f,a[11]*=f,a):(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*e,c[5]=a[5]*e,c[6]=a[6]*e,c[7]=a[7]*e,c[8]=a[8]*f,c[9]=a[9]*f,c[10]=a[10]*f,c[11]=a[11]*f,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c)},mat4.rotate=function(a,b,c,d){var e=c[0],f=c[1],g=c[2],h=Math.sqrt(e*e+f*f+g*g),i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;return h?(h!==1&&(h=1/h,e*=h,f*=h,g*=h),i=Math.sin(b),j=Math.cos(b),k=1-j,l=a[0],m=a[1],n=a[2],o=a[3],p=a[4],q=a[5],r=a[6],s=a[7],t=a[8],u=a[9],v=a[10],w=a[11],x=e*e*k+j,y=f*e*k+g*i,z=g*e*k-f*i,A=e*f*k-g*i,B=f*f*k+j,C=g*f*k+e*i,D=e*g*k+f*i,E=f*g*k-e*i,F=g*g*k+j,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=l*x+p*y+t*z,d[1]=m*x+q*y+u*z,d[2]=n*x+r*y+v*z,d[3]=o*x+s*y+w*z,d[4]=l*A+p*B+t*C,d[5]=m*A+q*B+u*C,d[6]=n*A+r*B+v*C,d[7]=o*A+s*B+w*C,d[8]=l*D+p*E+t*F,d[9]=m*D+q*E+u*F,d[10]=n*D+r*E+v*F,d[11]=o*D+s*E+w*F,d):null},mat4.rotateX=function(a,b,c){var d=Math.sin(b),e=Math.cos(b),f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=f*e+j*d,c[5]=g*e+k*d,c[6]=h*e+l*d,c[7]=i*e+m*d,c[8]=f*-d+j*e,c[9]=g*-d+k*e,c[10]=h*-d+l*e,c[11]=i*-d+m*e,c},mat4.rotateY=function(a,b,c){var d=Math.sin(b),e=Math.cos(b),f=a[0],g=a[1],h=a[2],i=a[3],j=a[8],k=a[9],l=a[10],m=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=f*e+j*-d,c[1]=g*e+k*-d,c[2]=h*e+l*-d,c[3]=i*e+m*-d,c[8]=f*d+j*e,c[9]=g*d+k*e,c[10]=h*d+l*e,c[11]=i*d+m*e,c},mat4.rotateZ=function(a,b,c){var d=Math.sin(b),e=Math.cos(b),f=a[0],g=a[1],h=a[2],i=a[3],j=a[4],k=a[5],l=a[6],m=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=f*e+j*d,c[1]=g*e+k*d,c[2]=h*e+l*d,c[3]=i*e+m*d,c[4]=f*-d+j*e,c[5]=g*-d+k*e,c[6]=h*-d+l*e,c[7]=i*-d+m*e,c},mat4.frustum=function(a,b,c,d,e,f,g){g||(g=mat4.create());var h=b-a,i=d-c,j=f-e;return g[0]=e*2/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=e*2/i,g[6]=0,g[7]=0,g[8]=(b+a)/h,g[9]=(d+c)/i,g[10]=-(f+e)/j,g[11]=-1,g[12]=0,g[13]=0,g[14]=-(f*e*2)/j,g[15]=0,g},mat4.perspective=function(a,b,c,d,e){var f=c*Math.tan(a*Math.PI/360),g=f*b;return mat4.frustum(-g,g,-f,f,c,d,e)},mat4.ortho=function(a,b,c,d,e,f,g){g||(g=mat4.create());var h=b-a,i=d-c,j=f-e;return g[0]=2/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2/i,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=-2/j,g[11]=0,g[12]=-(a+b)/h,g[13]=-(d+c)/i,g[14]=-(f+e)/j,g[15]=1,g},mat4.lookAt=function(a,b,c,d){d||(d=mat4.create());var e,f,g,h,i,j,k,l,m,n,o=a[0],p=a[1],q=a[2],r=c[0],s=c[1],t=c[2],u=b[0],v=b[1],w=b[2];return o===u&&p===v&&q===w?mat4.identity(d):(k=o-u,l=p-v,m=q-w,n=1/Math.sqrt(k*k+l*l+m*m),k*=n,l*=n,m*=n,e=s*m-t*l,f=t*k-r*m,g=r*l-s*k,n=Math.sqrt(e*e+f*f+g*g),n?(n=1/n,e*=n,f*=n,g*=n):(e=0,f=0,g=0),h=l*g-m*f,i=m*e-k*g,j=k*f-l*e,n=Math.sqrt(h*h+i*i+j*j),n?(n=1/n,h*=n,i*=n,j*=n):(h=0,i=0,j=0),d[0]=e,d[1]=h,d[2]=k,d[3]=0,d[4]=f,d[5]=i,d[6]=l,d[7]=0,d[8]=g,d[9]=j,d[10]=m,d[11]=0,d[12]=-(e*o+f*p+g*q),d[13]=-(h*o+i*p+j*q),d[14]=-(k*o+l*p+m*q),d[15]=1,d)},mat4.fromRotationTranslation=function(a,b,c){c||(c=mat4.create());var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return c[0]=1-(n+p),c[1]=l+s,c[2]=m-r,c[3]=0,c[4]=l-s,c[5]=1-(k+p),c[6]=o+q,c[7]=0,c[8]=m+r,c[9]=o-q,c[10]=1-(k+n),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},mat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"},quat4.create=function(a){var b=new MatrixArray(4);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]),b},quat4.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},quat4.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];return!b||a===b?(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a):(b[0]=c,b[1]=d,b[2]=e,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),b)},quat4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},quat4.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return!b||a===b?(a[0]*=-h,a[1]*=-h,a[2]*=-h,a[3]*=h,a):(b[0]=-a[0]*h,b[1]=-a[1]*h,b[2]=-a[2]*h,b[3]=a[3]*h,b)},quat4.conjugate=function(a,b){return!b||a===b?(a[0]*=-1,a[1]*=-1,a[2]*=-1,a):(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b)},quat4.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},quat4.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);return g===0?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(g=1/g,b[0]=c*g,b[1]=d*g,b[2]=e*g,b[3]=f*g,b)},quat4.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return c[0]=d*k+g*h+e*j-f*i,c[1]=e*k+g*i+f*h-d*j,c[2]=f*k+g*j+d*i-e*h,c[3]=g*k-d*h-e*i-f*j,c},quat4.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],g=a[0],h=a[1],i=a[2],j=a[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return c[0]=k*j+n*-g+l*-i-m*-h,c[1]=l*j+n*-h+m*-g-k*-i,c[2]=m*j+n*-i+k*-h-l*-g,c},quat4.toMat3=function(a,b){b||(b=mat3.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return b[0]=1-(m+o),b[1]=k+r,b[2]=l-q,b[3]=k-r,b[4]=1-(j+o),b[5]=n+p,b[6]=l+q,b[7]=n-p,b[8]=1-(j+m),b},quat4.toMat4=function(a,b){b||(b=mat4.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return b[0]=1-(m+o),b[1]=k+r,b[2]=l-q,b[3]=0,b[4]=k-r,b[5]=1-(j+o),b[6]=n+p,b[7]=0,b[8]=l+q,b[9]=n-p,b[10]=1-(j+m),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},quat4.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,g,h,i;return Math.abs(e)>=1?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(f=Math.acos(e),g=Math.sqrt(1-e*e),Math.abs(g)<.001?(d[0]=a[0]*.5+b[0]*.5,d[1]=a[1]*.5+b[1]*.5,d[2]=a[2]*.5+b[2]*.5,d[3]=a[3]*.5+b[3]*.5,d):(h=Math.sin((1-c)*f)/g,i=Math.sin(c*f)/g,d[0]=a[0]*h+b[0]*i,d[1]=a[1]*h+b[1]*i,d[2]=a[2]*h+b[2]*i,d[3]=a[3]*h+b[3]*i,d))},quat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}});var stage;const VFoldEvent={WORKSPACE_CHANGE:"workspaceChange",WORKSPACE_ADD:"workspaceAdd",FOLDER_CREATE:"FolderAdd",FOLDER_CLOSING:"FolderClose",FOLDER_SELECT:"FolderSelect"};init();var log=function(a){window.console&&window.console.log&&window.console.log(a)},error=function(a){window.console&&(window.console.error?window.console.error(a):window.console.log&&window.console.log(a))},VFold;define(function(){function c(){this.color=2302755}function l(){g=new EventDispatcher,k=new Pooling(NetConn)}function m(a,b){var c=NetConn(k.getObject());return k.instantiated&&(c.onClose=function(a){k.returnToPool(a)}),c.onSuccess=a,c.onError=b,c}var a=c.prototype,b=a.constructor;b.PANEL_HEIGHT=50,b.desktops,b.panels,b.folders,b.widgets,b.WORKSPACE_CHANGE="workspaceChange",b.WORKSPACE_ADD="workspaceAdd";var d;const e={},f=[];var g,h,i;b.USER,b.HEADER;var j,k;b.init=function(a,b){h=a.aesKey,i=a.facebookAppID,j=encrypt(a.rootPassword,128),HEADER=new VOHeader,HEADER.session=new VOSession,rootCall("Session.init",function(a){var c=a,d=SharedObject.getLocal("vfold_session","/");HEADER.session.id=d.data.id=c.id,HEADER.session.code=d.data.code=c.code,d.flush(),b()},[HEADER.session,j]),Facebook.init(i,function(a,b){onFacebookLogin(a,b)})},b.startGUI=function(a){panels=new PanelHandler,folders=new FolderHandler,desktops=new DesktopHandler,widgets=new WidgetHandler;for(var b in a){var c=new Workspace;c.title=b.title;for(var d in b.components){c.setComponent(new WorkspaceComponent(d));if(d.type==VOComponent.FOLDER){var e=d.menu_path.split("."),h=c.menu,i;for(var j=0;j<e.length;j++)i=h.children[e[j]],i||(i=new MenuOptions,i.title=e[j]),j==e.length-1&&(i.launch=d.class_path),h.children[e[j]]=i,h=i}}f.push(c),g.dispatchEvent(new Event(WORKSPACE_ADD))}var k=VFOLD.stage.loaderInfo.parameters;k.confirm&&rootCall("User.confirm",function(a){a&&notify("Your account has been confirmed!\nNow you can sign-in")},k.confirm),UtilityJavascript.initMouseWheel(VFOLD.stage),UtilityJavascript.changeDocumentTitle(VFOLD.projectTitle+"-"+f[0].title),widgets.init(),folders.init(),panels.init(),panels.addTool(new UserTool),stage.addChild(desktops),stage.addChild(widgets),stage.addChild(folders),stage.addChild(panels),useWorkspace(0),notify("Powered by vfold")},b.notif=function(){var a=" ";for(var b in rest)a+=String(b)+" ";widgets.notifier.notify(a)},b.useWorkspace=function(a){d=a,dispatcher.dispatchEvent(new Event(WORKSPACE_CHANGE))},b.getDesktopHandler=function(){return desktops},b.getPanelHandler=function(){return panels},b.getFolderHandler=function(){return folders},b.getWidgetHandler=function(){return widgets},b.getDispatcher=function(){return g},b.getCurrentWorkspace=function(){return f[d]},b.getDefaultWorkspace=function(){return f[0]},b.getCurrentWorkspaceIndex=function(){return d},b.getCurrentUser=function(){return USER},b.getLibraries=function(){return e},b.appCall=function(a,b,c,d){m(b,d).amfCall(a,c,!1)},b.rootCall=function(a,b,c,d){m(b,d).amfCall(a,c,!0)},b.getExternalClass=function(a,b,c){var d=e[b];return d?d.hasDefinition(c)?d.getDefinition(c):null:null},b.checkRootPassword=function(a){return h==decrypt(j,a,128)},b.signInFacebook=function(){Facebook.login(onFacebookLogin,{perms:"user_about_me, user_birthday, email, publish_stream, offline_access"})},b.onFacebookLogin=function(a,b){var c},b.signInUser=function(a,b,c){var d;rootCall("User.getOneBy",function(a){trace(a.role_value),a.role_value==UserRole.GUEST?(c(!1),l.notify("User has not yet been confirmed..Check your email")):rootCall("User.get",function(a){h==decrypt(a.password,b)?(USER=a,l.dispatcher.dispatchEvent(new Event(VFOLD.USER_CHANGE)),c(!0),d="Welcome back "+USER.first_name+"!"):(c(!1),d="Wrong password, try again"),l.notify(d)},a.id)},[{email:a},["role_value","id"]],function(a){a==ErrorUser.NOT_FOUND&&l.notify("Wrong email,try again")})},b.encrypt=function(a,b){return UtilityCryptography.encrypt(h,a,b?b:256)},b.decrypt=function(a,b,c){return UtilityCryptography.decrypt(a,b,c?c:256)},VFold=c});var Desktop;define(["vfold/display/container"],function(){function a(){}a.prototype=new Container,a.prototype.constructor=a,Desktop=a});var Panel;define(["vfold/display/container"],function(){function j(){b=new l,c=new Menu,m=new PanelToolbar,i=VFold.PANEL_HEIGHT-h}function k(){function g(){b.alpha=.8,addChild(b),addChild(d),addChild(c),mouseEnabled=mouseChildren=!1,c.y=PanelHandler.CONTENT_HEIGHT,d.y=VFOLD.PANEL_HEIGHT}var a=g.prototype;a=new Kinetic.Group,a.constructor=g;var b=new Kinetic.Shape("panelBackground"),c=new Kinetic.Shape("panelLoader"),d=new Kinetic.Shape("shadow");const e=GradientType.LINEAR;var f=new Matrix;return a.draw=function(){var a;a=b.getContext(),a.clear(),a.beginFill(VFOLD.color,.7),a.drawRect(0,0,VFOLD.stage.stageWidth,PanelHandler.CONTENT_HEIGHT),a.endFill(),a=d.getContext(),a.clear(),f.createGradientBox(VFOLD.stage.stageWidth,20,Math.PI/2),a.beginGradientFill(e,[0,0],[.7,0],[0,255],f),a.drawRect(0,0,VFOLD.stage.stageWidth,20),a.endFill(),a=c.getContext(),a.clear(),a.beginFill(UtilityColor.brightness(VFOLD.color,.7)),a.drawRect(0,0,VFOLD.stage.stageWidth,PanelHandler.LOADER_BAR_HEIGHT),a.endFill()},g}function l(){function g(){var a=UtilityColor.hexToRGB(VFOLD.color);TweenMax.to(d,0,{colorTransform:{redOffset:a.red,greenOffset:a.green,blueOffset:a.blue}}),addChild(d),f=PanelHandler.CONTENT_HEIGHT,x=5,alpha=.8,addEventListener(MouseEvent.MOUSE_OVER,j),addEventListener(MouseEvent.MOUSE_OUT,k),addEventListener(MouseEvent.MOUSE_DOWN,h),TweenMax.to(this,0,{glowFilter:{color:16777215,blurX:30,blurY:7,alpha:1,strength:1.3}}),c=TweenMax.to(this,.15,{paused:!0,glowFilter:{blurX:7,blurY:7,alpha:1}})}function h(){b?(b=!1,Core.panelHandler.menu.fadeOut(),k(),VFOLD.stage.removeEventListener(MouseEvent.MOUSE_DOWN,i),addEventListener(MouseEvent.MOUSE_DOWN,h)):(j(),Core.panelHandler.menu.fadeIn(),b=!0,VFOLD.stage.addEventListener(MouseEvent.MOUSE_DOWN,i),removeEventListener(MouseEvent.MOUSE_DOWN,h))}function i(){e.target!=this&&h()}function j(){b||c.play()}function k(){b||c.reverse()}var a=new Kinetic.Group;a.constructor=g;var b=!1,c,d=VFold.call("System.getImage","menu"),f;a.changeLogo=function(a){a&&(d.bitmapData=a.bitmapData),y=(height-d.height)/2},a.getWidth=function(){return x*2+this.width},a.getHeight=function(){return f}}function m(){function j(){y=g,e=(i-g)/2-g,addEventListener(Tool.TOOL_CHANGE,k),h=new WorkspaceSwitcher,addTool(h),addChild(b),addChild(c),VFOLD.onStageResize=onStageResize}function k(a){var d=Tool(a.target),e;switch(d.align){case Tool.ALIGN_LEFT:for(e=0;e<b.numChildren;e++)e!=0?b.getChildAt(e).x=b.getChildAt(e-1).x+b.getChildAt(e-1).width+f:b.getChildAt(e).x=f;break;case Tool.ALIGN_RIGHT:for(e=0;e<c.numChildren;e++)e!=0?c.getChildAt(e).x=-c.getChildAt(e-1).x-c.getChildAt(e-1).width-f:c.getChildAt(e).x=-c.getChildAt(e).width}}var a=j.prototype;a=new Kinetic.Group,a.constructor=j;var b=new Kinetic.Group,c=new Kinetic.Group,d,e;const f=2;var h;a.onStageResize=function(){d=VFOLD.stage.stageWidth-x-g-f,c.x=d,dispatchEvent(new Event(DropBox.ADJUST_OFFSET))},a.addTool=function(a){var d;switch(a.align){case Tool.ALIGN_LEFT:d=b.numChildren,b.addChild(a),d!=0?a.x=b.getChildAt(d-1).x+b.getChildAt(d-1).width+f:a.x=f;break;case Tool.ALIGN_RIGHT:d=c.numChildren,c.addChild(a),d!=0?a.x=-c.getChildAt(d-1).x-a.width-f:a.x=-a.width}},a.getWidth=function(){return d},a.getHeight=function(){return e}}var a=new Container;a.constructor=j;var b,c,d,f,g=3,h=3,i;a.init=function(){const e=new k;f=Core.folderHandler.folderBar,c.x=c.gap,c.y=VFOLD.PANEL_HEIGHT+c.gap,c.onMenuButtonDown=function(a){Core.folderHandler.addFolder(a.options.launch)},a.add(e),a.add(b),a.add(f),a.add(d),a.add(c),mouseEnabled=!1,VFOLD.onStageResize=function(){e.draw()}},a.addTool=function(a){d.addTool(a)},a.onWorkspaceChange=function(){var a=Core.defaultWorkspace.menu.icon,e=Core.currentWorkspace.menu.icon;c.addButtons(Core.currentWorkspace.menu.children),b.changeLogo(e?e:a),d.x=f.x=b.width,d.onStageResize()},a.getMenu=function(){return c},a.getToolbar=function(){return d},Panel=j});var Widgets;define(["vfold/display/container"],function(){function a(){}a.prototype=new Container,a.prototype.constructor=a,Widgets=a});var Folders;define(["vfold/display/container"],function(){function f(){this.dispatcher=new EventDispatcher}function g(){removeFolder(d.currentData)}function h(){i(d.currentData)}function i(a){wSpace.numChildren>0&&(Folder(wSpace.getChildAt(wSpace.numChildren-1)).active=!1),a.active=!0,d.selectTab(a),c=a,wSpace.addChildAt(a,wSpace.numChildren),dispatchEvent(new Event(FOLDER_SELECT))}function j(){b.push(new Kinetic.Container)}function k(){return b[Core.currentWorkspaceIndex]}var a=new Container,b=[],c,d;a.constructor=f,a.init=function(){this.add(new Kinetic.Layer),this.dispatcher.addListener(VFoldEvents.FOLDER_SELECT,function(){a.selectFolder(Folder(e.target))}),d=new Tabs(Panel.CONTENT_HEIGHT/2-3,VFold.color,.7,h,g),d.y=PanelHandler.CONTENT_HEIGHT-d.height,addChild(d),VFold.addResizeCallback(function(){d.adjust(stage.width-x)})},a.addFolder=function(a){WorkspaceComponent.instantiate(a,function(a){var b=a;d.addTab(b.name,b),dispatchEvent(new Event(FOLDER_CREATE)),i(b)})},a.removeFolder=function(a){c=a,wSpace.removeChild(a),dispatchEvent(new Event(FOLDER_CLOSING)),wSpace.numChildren>0&&(Folder(wSpace.getChildAt(wSpace.numChildren-1)).active=!0)},a.closeFolder=function(a){d.removeTabByData(a),removeFolder(a)},a.selectFolder=i,a.getFolderBar=function(){return d},a.getActiveFolder=function(){return c},a.onWorkspaceChange=function(){this.remove(0),this.add(b[Core.currentWorkspaceIndex])},Folders=f}),define(function(){function a(){}return a.prototype={test:function(){alert("sss")}},a});var Options;define(function(){function a(a,b,c){this.rootPassword=a,this.aesKey=b,this.facebookAppID=c}Options=a});var Workspace,WorkspaceComponent,WorkspaceLayer;define(function(){function a(){function f(){}var a=f.prorotype,b=[],c=[],d=[],e=[];a.title="Untitled",a.menu=new MenuOptions,a.getFolders=function(){return b},a.getTools=function(){return c},a.getWidgets=function(){return d},a.getDesktops=function(){return e},a.getComponent=function(a){var f=b[a],g=e[a],h=d[a],i=c[a];return f?f:g?g:h?h:i?i:null},a.setComponent=function(a){var f=WorkspaceComponent.type;switch(a.type){case f.DESKTOP:a.initOnce=!0,e[a.class_path]=a;break;case f.FOLDER:var g=menu,h=a.menu_path.split(".");for(var i;i<h.length;i++){var j=h[i],k=g.children[j];k||(k=new MenuOptions,k.title=j,i==h.length-1&&(k.launch=a.class_path),g.setChild(k)),g=k}b[a.class_path]=a;break;case f.WIDGET:d[a.class_path]=a;break;case f.TOOL:a.initOnce=!0,c[a.class_path]=a;break;default:alert("Unrecognized type")}},Workspace=f}function b(){function b(){this.dispatcher=new EventDispatcher}var a=new Kinetic.Layer("WorkspaceLayer");a.constructor=b,WorkspaceLayer=b}function c(){function c(a){}const a=[];var b=!1;c.instantiate=function(a,b){function h(){if(d.hasDefinition(e.class_path))if(e.initOnce&&e.instances.length>0)b(e.instances[0]);else{var a=d.getDefinition(e.class_path),c=new a;c.name=e.title,b(c)}else if(f)if(f.dependencies.length>0)for(var g in f.dependencies)Core.libraries[g]?j():Core.appCall("Library.getByName",function(a){i(a.data,j)},[g]);else i(f.data,k);else e.libraryTitle?Core.appCall("Library.get",function(a){f=a,h()},[e.libraryTitle]):alert("Library ID not specified")}function i(a,b){var c=new Loader;c.contentLoaderInfo.addEventListener(Event.COMPLETE,function(){b()}),c.loadBytes(a,new LoaderContext(!1,d))}function j(){g++,g==f.dependencies.length&&(g=0,i(f.data,k))}function k(){f=null,h()}var d=new ApplicationDomain(VFOLD.appDomain),e=Core.currentWorkspace.getComponent(a);if(!e){alert("Component not found!");return}var f,g=0;h(),WorkspaceComponent=c}}a(),b(),c()});var gl={},canvas;gl.init=function(){function d(d,f){function g(b){var c=d.parentNode;c&&(c.innerHTML=a(b))}if(!window.WebGLRenderingContext)return g(b),null;var h=e(d,f);return h||g(c),h}function e(a,b){var c=["webgl","experimental-webgl"],d=null;for(var e=0;e<c.length;++e){try{d=a.getContext(c[e],b)}catch(f){}if(d)break}return d}function f(a,b,c,d){var e=d||error,f=a.createShader(c);a.shaderSource(f,b),a.compileShader(f);var g=a.getShaderParameter(f,a.COMPILE_STATUS);return g?f:(error("*** Error compiling shader '"+f+"':"+a.getShaderInfoLog(f)),a.deleteShader(f),null)}var a=function(a){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+a+"</div>"+"</div>"+"</td></tr></table>"},b='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(a,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout}(),gl=d(canvas=document.getElementById("canvas")),gl.createShaderFromScript=function(a,b,c){var d="",e,g=document.getElementById(a);if(!g)throw"*** Error: unknown script element: '"+a+"'";d=g.text;if(!b)if(g.type=="x-shader/x-vertex")e=gl.VERTEX_SHADER;else if(g.type=="x-shader/x-fragment")e=gl.FRAGMENT_SHADER;else if(e!=gl.VERTEX_SHADER&&e!=gl.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return f(gl,d,b?b:e,c)},gl.make2DProjection=function(a,b){return[2/a,0,0,0,-2/b,0,-1,1,1]},gl.makeTranslation=function(a,b){return[1,0,0,0,1,0,a,b,1]},gl.makeRotation=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,-c,0,c,b,0,0,0,1]},gl.makeScale=function(a,b){return[a,0,0,0,b,0,0,0,1]},canvas};var Pooling;define(function(){function e(a){c=a}var a=[],b=[],c,d;e.prototype={getObject:function(){var e;return a.length>0?(e=a.pop(),d=!1):(e=new c,d=!0),b.push(e),e},returnToPool:function(c){b.splice(b.indexOf(c),1),a.push(c)},returnAll:function(){while(b.length>0){var c=b[0];b.splice(0,1),a.push(c)}},getObjects:function(){return b},isLastInstantiated:function(){return d},numActiveObjects:function(){return b.length}},Pooling=e});var Math={};define(function(){var a=Math;a.randomInt=function(a){return Math.floor(Math.random()*a)}});var Container;define(function(){function b(){this.children=[],this.childrenIDs=[]}function c(){for(var a=0;a<this.children.length;a++)this.children[a].index=a}var a=b.prototype;a.addChild=function(a){this.childrenIDs[a.id]=a,a.index=this.children.length,a.parent=this,this.children.push(a)},a.removeChild=function(a){this.childrenIDs[a.id]=undefined,this.children.splice(a.index,1),c(),a=undefined},a.addChildAt=function(a,b){this.childrenIDs[a.id]=a,a.index=b,a.parent=this,this.children.splice(b,0,a),c()},a.removeChildAt=function(a){var b=this.children[a];this.childrenIDs[b.id]=undefined,this.children.splice(a,1),c(),b=undefined},Container=b});var program={};define(function(){program.init=function(a){function f(a){var b=0;for(var c=0;c<a.length;c++)g(a[c],function(){b++,b==a.length&&h()})}function g(a,d){var e=a.split("-"),f=document.createElement("script");f.id=a;var g;switch(e[0]){case"vertex":f.type="x-shader/x-vertex",g=b;break;case"fragment":f.type="x-shader/x-fragment",g=c;break;default:return}require(["text!"+program.baseURL+a+".html"],function(b){f.text=b,document.getElementsByTagName("head")[0].appendChild(f),g[e[1]]=gl.createShaderFromScript(a),d()})}function h(){var d=i([b.matrix,c.color]);d.positionLocation=gl.getAttribLocation(d,"a_position"),d.colorLocation=gl.getUniformLocation(d,"u_color"),d.matrixLocation=gl.getUniformLocation(d,"u_matrix"),program.NORMAL=d,a()}function i(a,b,c){var d=gl.createProgram();for(var e=0;e<a.length;e++)gl.attachShader(d,a[e]);if(b)for(var e=0;e<b.length;e++)gl.bindAttribLocation(d,c?c[e]:e,b[e]);gl.linkProgram(d);var f=gl.getProgramParameter(d,gl.LINK_STATUS);return f?d:(error("Error in program linking:"+gl.getProgramInfoLog(d)),gl.deleteProgram(d),null)}var b={},c={};program.baseURL="vfold/shader/";var d="OES_standard_derivatives",e=gl.getSupportedExtensions().indexOf(d)>=0;e&&gl.getExtension(d),f(["vertex-matrix","fragment-color","fragment-bezier"])}});var Core;define(function(){function a(){}Core=a});var Menu,MenuButton,MenuButtons;define(["vfold/display/container"],function(){function a(){function d(){var a,b;addEventListener(MouseEvent.MOUSE_OVER,function(c){MenuButton&&(b&&b!=c.target.parent.parent&&b.fadeOut(),a=c.target,b=c.target.parent.buttonContainer,a.onMouseOver(),b.fadeIn(),b.previousIndex=a.index)}),addEventListener(MouseEvent.MOUSE_OUT,function(b){b.target&&(a=b.target,a.onMouseOut())}),addEventListener(MouseEvent.MOUSE_DOWN,function(b){MenuButton&&(a=b.target,a.onMouseDown(),c&&c(a))})}var a=new MenuButtons(VFold.color,b),b=7,c;a.getGap=function(){return b},a.setMenuButtonCallback=function(a){c=a},Menu=d}function b(){function b(a,b){d=a,e=b}function k(){function e(a,e,f){d=e,b=new MenuButtons(a,d),c=new MenuButton(a,f,f.children.length>0),addChild(b),addChild(c),f&&b.addButtons(f.children)}var a=k.prototype,b,c,d;a.getButtonContainer=function(){return b},a.getButton=function(){return c},a.setWidth=function(a){c.width=a,b.x=a+d},a.getHeight=function(){return c.height}}var a=new Container,c=[],d,e,f,g=[],h=[],i=.35,j;a.addButtons=function(a){var b=0,j=c.length,l=0;for(var m in a)c[b]=new k(d,e,m),c[b].button.index=b,c[b].button.alpha=0,b!=0&&(c[b].y+=b*(c[b-1].height+e)),b!=j?l=Math.max(l,c[b].button.width):l=c[b].button.width,h.push(c[b].button),addChild(c[b]),b++;b=j,j>1&&l>c[j-1].button.width&&(b=0);for(b;b<c.length;b++)c[b].width=l;f.clear(),g=TweenMax.allFromTo(h,i,{alpha:0,y:"50"},{alpha:1,y:"-50"},i/h.length),f.insertMultiple(g)},a.fadeIn=function(){f.play(),mouseChildren=!0},a.fadeOut=function(){f.reverse(),mouseChildren=!1,c.length>0&&c[j].buttonContainer.fadeOut()},a.setPreviousIndex=function(a){j=a},MenuButtons=b}function c(){function b(){}var a=new Container;MenuButton=b}c(),b(),a()})